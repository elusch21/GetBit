<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" href="style.css">
    <title>Account</title>
    <style>
        p {
            font-size: 20px;
            color: black;
        }
        .column1 {
            float: left;
            width: 50%;
        }
        .column2 {
            float: right;
             width: 50%;
        }
    </style>
</head>
<body>
<!--Standard Nav Bar -->
    <div class="nav">
        <a href="index.html">Homepage</a>
        <a href="documentation.html">Documentations</a>
        <div class="dropdown">
            <button class="dropbtn">Account</button>
            <div class="dropdown-content">
                <a href="Login.html">Login</a>
                <a href="SignUp.html">Sign Up</a>
            </div>
        </div>
        <a href="contact.html">Contact Us</a>
    </div>
    <div class="column1">
        <h1>Welcome Back, USER</h1>
        <h3 id="date"></h3>
<!-- BitCoin Table -->
        <table class="bitcoin-table">
            <thead>
                <tr>
                    <th>Name</th>
                    <th>Symbol</th>
                    <th>Last Price</th>
                    <th>24h Change</th>
                    <th>Rank</th>     
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>1</td>
                    <td>Hi</td>
                    <td>$5</td>
                    <td>200</td>
                    <td>Yes</td>
                </tr>
                <tr>
                    <td>2</td>
                    <td>Hi</td>
                    <td>$5</td>
                    <td>200</td>
                    <td>Yes</td>
                </tr>
                <tr>
                    <td>3</td>
                    <td>Hi</td>
                    <td>$5</td>
                    <td>200</td>
                    <td>Yes</td>
                </tr>
                <tr>
                    <td>4</td>
                    <td>Hi</td>
                    <td>$5</td>
                    <td>200</td>
                    <td>Yes</td>
                </tr>
                <tr>
                    <td>5</td>
                    <td>Hi</td>
                    <td>$5</td>
                    <td>200</td>
                    <td>Yes</td>
                </tr>
                <tr>
                    <td>6</td>
                    <td>Hi</td>
                    <td>$5</td>
                    <td>200</td>
                    <td>Yes</td>
                </tr>
                <tr>
                    <td>7</td>
                    <td>Hi</td>
                    <td>$5</td>
                    <td>200</td>
                    <td>Yes</td>
                </tr>
                <tr>
                    <td>8</td>
                    <td>Hi</td>
                    <td>$5</td>
                    <td>200</td>
                    <td>Yes</td>
                </tr>
            </tbody>
        </table>
    </div>
<!-- Insert Coin Form -->
    <div class="column2">
        <div class="account-pages">
            <div class="form">
                <form>
                    <p style="color: white;">Add a coin to keep track of</p>
                    <input type="text" name="coin" placeholder="eg. BTC"/>
                    <input type="button" onclick="submit()" value='ADD'>
                </form>
            </div>
        </div>
        <div class="account-pages">
            <div class="form">
                <form>
                    <p style="color: white;">Delete coin from tracking</p>
                    <input type="text" name="coin" placeholder="eg. BTC"/>
                    <input type="button" onclick="submit()" value='REMOVE'>
                </form>
            </div>
        </div>
    </div>

    <script type="text/javascript">
        function submit() {
            // if symbol is found from API, add it to user mongo
            // else alert "coin not found"
        }
        var date = new Date();
        var month = date.getMonth() + 1;
        var day = date.getDate();
        var year = date.getFullYear();

        var message = "Your Coins as of " + month + "/" + day + "/" + year;
        document.getElementById("date").innerHTML = message;
    
        
        function makeCall(val) {
            request = new XMLHttpRequest();
            request.open("GET", "https://api.coinranking.com/v1/public/coins?base=USD&symbols=" 
                                + val + "&timePeriod=24h", true);

            request.onreadystatechange = function() {
                if (request.readyState == 4 && request.status == 200) {
                    var result = request.responseText;
                    var obj = JSON.parse(result);
                    var str = "Name: " + obj.data.coins[0].name + "\n" 
                            + "Symbol: " + obj.data.coins[0].symbol + "\n" 
                            + "Last Price (USD): $" + parseFloat(obj.data.coins[0].price).toFixed(2) 
                            + "\n" + "24h Change: $" + parseFloat(obj.data.coins[0].change)
                            + "\n" + "Rank: " + parseFloat(obj.data.coins[0].rank);

                    alert(str);
                } else if (request.readyState == 4) {
                    //failed request, handle it
                } else if (request.readyState == 3) {
                    //incomplete request, handle it
                    document.getElementById("data").innerHTML = "Request Processing...";
                }
            }
            request.send();
        }
    </script>

    <button onclick="makeCall('BTC')">TEST</button>
</body>
</html>